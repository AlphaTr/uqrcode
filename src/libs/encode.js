"use strict";function QREncode(){this.image=null,this.nModules=0,this.version=0,this.functionalGrade=0,this.ECLevel=0,this.mask=0,this.maskPattern=[],this.nDataCodewords=0,this.nBlockEcWords=0,this.blockIndices=[],this.blockDataLengths=[]}QREncode.prototype={encodeToPix:function(e,t,n,r){var o,i=QRBase.nModulesFromVersion(n),s={};this.nModules=i,s.width=i,s.height=i,s.arr=[];for(o=0;o<i;o++)s.arr[o]=[];return s.setBackground=function(){var e;for(o=0;o<i;o++){for(e=0;e<i;e++)this.arr[o][e]=!1}},s.setDark=function(e,t){if(e>i-1||t>i-1)return;this.arr[e][t]=!0},s.isDark=function(e,t){return e>i-1||t>i-1?!1:s.arr[e][t]},this.encodeInit(n,r,s),this.encodeAddText(e,t),this.encode(),s.arr},setErrorThrow:function(e){QRBase.setErrorThrow(e)},encodeInit:function(e,t,n){var r;this.version=e,this.ECLevel=t,this.image=n,this.image.setBackground(),this.bitIdx=0,QRBase.setBlocks(this),this.data=[];for(r=0;r<this.nDataCodewords;r++)this.data[r]=0;this.pixels=[];for(r=0;r<this.nModules;r++)this.pixels[r]=[]},encodeAddText:function(e,t){this.addTextImplementation(e,t)},encode:function(){this.addTextImplementation(QRBase.MODE.Terminator,null),this.appendPadding(),this.addErrorCorrection(),this.encodeBestMask(),this.pixelsToImage()},addTextImplementation:function(e,t){function n(e,t,n,r){var i=t>>>3,s=24-(t&7)-n,o=r<<s;e[i+2]=o&255,o>>>=8,e[i+1]=o&255,o>>>=8,e[i]+=o&255}function r(e,t){return t=t.toUpperCase(),e.alphanumRev.hasOwnProperty(t)||QRBase.errorThrow("Invalid character for Alphanumeric encoding ["+t+"]"),e.alphanumRev[t]}function i(e,t){var o,u,i=t.length,s=QRBase.nCountBits(QRBase.MODE.AlphaNumeric,e.version);n(e.data,e.bitIdx,s,i),e.bitIdx+=s;for(o=0;o<i-1;o+=2)u=45*r(e,t[o])+r(e,t[o+1]),n(e.data,e.bitIdx,11,u),e.bitIdx+=11;i%2&&(n(e.data,e.bitIdx,6,r(e,t[i-1])),e.bitIdx+=6)}function s(e,t){var i,r=QRBase.nCountBits(QRBase.MODE.EightBit,e.version);n(e.data,e.bitIdx,r,t.length),e.bitIdx+=r;for(i=0;i<t.length;i++)n(e.data,e.bitIdx,8,t[i].charCodeAt()),e.bitIdx+=8}function o(e,t){var o,u,a,r=t.length,i=QRBase.nCountBits(QRBase.MODE.Numeric,e.version),s=[];n(e.data,e.bitIdx,i,r),e.bitIdx+=i;for(u=0;u<r;u++)a=t[u].charCodeAt()-48,(a<0||a>9)&&QRBase.errorThrow("Invalid character for Numeric encoding ["+t[u]+"]"),s.push(a);for(u=0;u<r-2;u+=3)o=100*s[u]+10*s[u+1]+s[u+2],n(e.data,e.bitIdx,10,o),e.bitIdx+=10;r%3===1?(o=s[r-1],n(e.data,e.bitIdx,4,o),e.bitIdx+=4):r%3===2&&(o=10*s[r-2]+s[r-1],n(e.data,e.bitIdx,7,o),e.bitIdx+=7)}n(this.data,this.bitIdx,4,e),this.bitIdx+=4;if(e===QRBase.MODE.AlphaNumeric)i(this,t);else if(e===QRBase.MODE.EightBit)s(this,QRBase.unicodeToUtf8(t));else if(e===QRBase.MODE.Numeric)o(this,t);else{if(e===QRBase.MODE.Terminator)return;QRBase.errorThrow("Unsupported ECI mode: "+e)}this.bitIdx/8>this.nDataCodewords&&QRBase.errorThrow("Text too long for this EC version")},appendPadding:function(){var e;for(e=Math.floor((this.bitIdx-1)/8)+1;e<this.nDataCodewords;e+=2)this.data[e]=236,this.data[e+1]=17},addErrorCorrection:function(){var r,i,s,o,u,e=new ReedSolomon(this.nBlockEcWords),t=[],n=0;for(r=0;r<this.blockDataLengths.length;r++){s=this.blockDataLengths[r],o=this.data.slice(n,n+s),n+=s;for(i=0;i<s;i++)t[this.blockIndices[r][i]]=o[i];u=e.encode(o);for(i=0;i<u.length;i++)t[this.blockIndices[r][s+i]]=u[i]}this.bytes=t},calculatePenalty:function(){var i,s,o,u,a;function e(e){var n,r,i,s,o,t=0;for(n=0;n<e.nModules;n++){i=[0,0],s=[0,0];for(o=0;o<=1;o++){for(r=0;r<e.nModules;r++)e.pixels[o*n+(1-o)*r][(1-o)*n+o*r]?(s[o]>5&&(t+=3+s[o]-5),s[o]=0,i[o]++):(i[o]>5&&(t+=3+i[o]-5),s[o]++,i[o]=0);s[o]>5&&(t+=3+s[o]-5),i[o]>5&&(t+=3+i[o]-5)}}return t}function t(e){var n,r,i,t=0;for(n=0;n<e.nModules-1;n++)for(r=0;r<e.nModules-1;r++){i=0,e.pixels[n][r]&&i++,e.pixels[n+1][r]&&i++,e.pixels[n][r+1]&&i++,e.pixels[n+1][r+1]&&i++;if(i===0||i===4)t+=3}return t}function n(e){var o,u,a,f,t=0,n=1488,r=2047,i=r<<4,s=32767;for(o=0;o<e.nModules-1;o++){a=[0,0];for(u=0;u<e.nModules-1;u++)for(f=0;f<=1;f++)a[f]=a[f]<<1&s,e.pixels[f*o+(1-f)*u][(1-f)*o+f*u]&&a[f]++,u>=11&&((a[f]&r)===n?t+=40:u<e.nModules-4-7&&(a[f]&i)===n&&(t+=40))}return t}function r(e){var n,r,t=0;for(n=0;n<e.nModules-1;n++)for(r=0;r<e.nModules-1;r++)e.pixels[n][r]&&t++;return 10*Math.floor(Math.abs(t/(e.nModule*e.nModules)-.5)/.05)}i=e(this),s=t(this),o=n(this),u=r(this),a=i+s+o+u;return a},encodeBestMask:function(){var n,r,i,s,e=0,t=999999;QRBase.setFunctionalPattern(this);for(n=0;n<8;n++){for(r=0;r<this.nModules;r++)for(i=0;i<this.nModules;i++)this.pixels[r][i]=!1;this.encodeFunctionalPatterns(n),this.encodeData(n),s=this.calculatePenalty(n),s<t&&(t=s,e=n)}this.mask=e;if(this.mask!==7){for(r=0;r<this.nModules;r++)for(i=0;i<this.nModules;i++)this.pixels[r][i]=!1;this.encodeFunctionalPatterns(this.mask),this.encodeData(this.mask)}},encodeFunctionalPatterns:function(e){var f;function t(e,t,n){var r,i;for(r=0;r<=5;r++)e.pixels[t+r][n]=!0,e.pixels[t+6][n+r]=!0,e.pixels[t+6-r][n+6]=!0,e.pixels[t][n+6-r]=!0;for(r=2;r<=4;r++)for(i=2;i<=4;i++)e.pixels[t+r][n+i]=!0}function n(e){var n,r,t=QRBase.versionInfo[e.version];for(r=0;r<6;r++)for(n=e.nModules-11;n<e.nModules-11+3;n++)t&1&&(e.pixels[n][r]=!0),t/=2}function r(e){var n,r,t=QRBase.versionInfo[e.version];for(n=0;n<6;n++)for(r=e.nModules-11;r<e.nModules-11+3;r++)t&1&&(e.pixels[n][r]=!0),t/=2}function i(e,t){var n;for(n=8;n<e.nModules-8;n+=2)t?e.pixels[n][6]=!0:e.pixels[6][n]=!0}function s(e,t,n){var r;for(r=0;r<=3;r++)e.pixels[t+r][n]=!0,e.pixels[t+4][n+r]=!0,e.pixels[t+4-r][n+4]=!0,e.pixels[t][n+4-r]=!0;e.pixels[t+2][n+2]=!0}function o(e){var n,r,t=QRBase.alignmentPatterns[e.version].length;for(n=0;n<t;n++)for(r=0;r<t;r++){if(n===0&&r===0||n===0&&r===t-1||n===t-1&&r===0)continue;s(e,QRBase.alignmentPatterns[e.version][n]-2,QRBase.alignmentPatterns[e.version][r]-2)}}function u(e,t){var r,n=8;for(r=0;r<=5;r++)t&1&&(e.pixels[n][r]=!0),t/=2;t&1&&(e.pixels[8][7]=!0),t/=2,t&1&&(e.pixels[8][8]=!0),t/=2,t&1&&(e.pixels[7][8]=!0),t/=2,r=8;for(n=5;n>=0;n--)t&1&&(e.pixels[n][r]=!0),t/=2}function a(e,t){var r,n=8;for(r=e.nModules-1;r>e.nModules-1-8;r--)t&1&&(e.pixels[r][n]=!0),t/=2;r=8;for(n=e.nModules-7;n<e.nModules-1;n++)t&1&&(e.pixels[r][n]=!0),t/=2}t(this,0,0),t(this,0,this.nModules-7),t(this,this.nModules-7,0),this.version>=7&&(n(this),r(this)),i(this,!0),i(this,!1),this.version>1&&o(this);f=QRBase.formatInfo[e+8*this.ECLevel];u(this,f),a(this,f)},encodeData:function(e){var n,r,i,s,o,u,a,f,l;function t(e,t,n,r,i){var s;switch(t){case 0:s=(r+n)%2;break;case 1:s=r%2;break;case 2:s=n%3;break;case 3:s=(r+n)%3;break;case 4:s=(Math.floor(r/2)+Math.floor(n/3))%2;break;case 5:s=r*n%2+r*n%3;break;case 6:s=(r*n%2+r*n%3)%2;break;case 7:s=((r+n)%2+r*n%3)%2}s===0?e[n][r]=!i:e[n][r]=i}n=!0,r=0,i=this.bytes[r],s=0,o=128;for(a=this.nModules-1;a>0;a-=2){a===6&&a--;for(f=0;f<this.nModules;f++){u=n?this.nModules-1-f:f;for(l=0;l<2;l++)this.functionalPattern[a-l][u]||(t(this.pixels,e,a-l,u,i&o),o>>>=1,s++,s===8&&(s=0,o=128,r++,i=this.bytes[r]))}n^=!0}},pixelsToImage:function(){var e,t;for(e=0;e<this.nModules;e++)for(t=0;t<this.nModules;t++)this.pixels[e][t]&&this.setDark(e,t)},getDataCapacity:function(e,t,n){var r=QRBase.nCodewords[e],i=QRBase.nECCodewords[e][t],s=r-i,o=8*s,u=0;return o-=4,o-=QRBase.nCountBits(n,e),n===QRBase.MODE.AlphaNumeric?(u=Math.floor(o/11)*2,o>=u/2*11+6&&u++):n===QRBase.MODE.EightBit?u=Math.floor(o/8):n===QRBase.MODE.Numeric?(u=Math.floor(o/10)*3,o>=u/3*10+4&&(o>=u/3*10+7&&u++,u++)):QRBase.errorThrow("Unsupported ECI mode: "+n),u},getVersionFromLength:function(e,t,n){var r,i=QRBase.unicodeToUtf8(n).length;for(r=1;r<=40;r++)if(this.getDataCapacity(r,e,t)>=i)return r;QRBase.errorThrow("Text is too long, even for a version 40 QR Code")},setDark:function(e,t){this.image.setDark(e,t)},alphanumRev:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,G:16,H:17,I:18,J:19,K:20,L:21,M:22,N:23,O:24,P:25,Q:26,R:27,S:28,T:29,U:30,V:31,W:32,X:33,Y:34,Z:35," ":36,$:37,"%":38,"*":39,"+":40,"-":41,".":42,"/":43,":":44}},"use strict",function(e){var i;e.qrcode={config:{text:"Test",render:"canvas",bgColor:"#FFF",moduleColor:"#000",moduleSize:5,mode:4,ECLevel:2,margin:4,logo:"",error:function(e){alert(e)}},Render:[]};i=function(t,n){var r=this;return r.config=t,e.extend(r,{_init:function(){r.qr=new QREncode,r.qr.setErrorThrow(function(e){t.error(e)}),t.logo&&(t.ECLevel=2),r.version=r.qr.getVersionFromLength(t.ECLevel,t.mode,t.text),r.pixArr=r.qr.encodeToPix(t.mode,t.text,r.version,t.ECLevel),e.qrcode.Render[t.render](r,n)}}),r._init()};e.fn.qrcode=function(t){var s,n=e(this),r=n.length,o={};typeof t=="string"?o.text=t:o=t,o=e.extend({},e.qrcode.config,o),new i(o,function(e){for(s=0;s<r;s++)n.eq(s).empty().append(e)})}}(jQuery,window,document),function(e,t,n){if(!e.qrcode)return;e.qrcode.Render.canvas=function(t,r){var i=t.config,s=i.margin,o=i.margin,u=i.moduleSize,a=t.pixArr.length,f=2*i.margin+a,l=n.createElement("canvas"),c=l.getContext("2d"),h=function(e){var t,n,r;e.indexOf("#")===0&&(e=e.substr(1));if(e.length===6)t=e.substr(0,2),n=e.substr(2,2),r=e.substr(4,2);else{if(e.length!==3)throw"error color";t=e.substr(0,1),t+=t,n=e.substr(1,1),n+=n,r=e.substr(2,1),r+=r}return"rgb("+parseInt(t,16)+", "+parseInt(n,16)+", "+parseInt(r,16)+")"},p=function(){var e=i.margin*2+t.pixArr.length;l.width=e*u,l.height=e*u,c.fillStyle=h(i.bgColor),c.fillRect(0,0,l.width,l.height)},d=function(e,t){c.fillStyle=h(i.moduleColor),c.fillRect(e*u,t*u,u,u)},v=function(t){var n=new Image;n.src=i.logo,n.onload=function(){var r=n.width,i=n.height,s=Math.max(r,i),o;s>a*u*.3&&(o=a*u*.3/s,r*=o,i*=o),c.drawImage(n,(f*u-r)/2,(f*u-i)/2,r,i),e.isFunction(t)&&t()}};p();for(;s<t.pixArr.length+i.margin;s++){o=i.margin;for(;o<t.pixArr.length+i.margin;o++)t.pixArr[s-i.margin][o-i.margin]&&d(s,o,h(i.moduleColor))}i.logo?v(function(){e.isFunction(r)&&r(l)}):e.isFunction(r)&&r(l)}}(jQuery,window,document)